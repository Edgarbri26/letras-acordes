import{j as f}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.WFquGv8Z.js";import{S}from"./SongLine.Pob6Upoq.js";import{a as C}from"./music.CRsQeu5U.js";function B({initialContent:p,initialKey:s="C",originalKey:n="C",initialShowChords:h=!0}){const[x,g]=r.useState(()=>s&&n&&s!==n?C(p,n,s):p),[l,i]=r.useState(s||n),[b,v]=r.useState(h);return r.useEffect(()=>{const d=(e,c)=>{const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],m={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E","E#":"F","B#":"C"}[e]||e;let w=t.indexOf(m);if(w===-1)return e;let u=(w+c)%12;return u<0&&(u+=12),t[u]},o=e=>{const c=e.detail.semitones;i(t=>{const a=d(t,c);return g(m=>C(m,t,a)),a})},E=()=>{v(e=>!e)};return window.addEventListener("song-transpose",o),window.addEventListener("song-toggle-chords",E),()=>{window.removeEventListener("song-transpose",o),window.removeEventListener("song-toggle-chords",E)}},[]),f.jsx("div",{className:"pb-20",children:x.split(`
`).map((d,o)=>f.jsx(S,{line:d,showChords:b},o))})}export{B as default};

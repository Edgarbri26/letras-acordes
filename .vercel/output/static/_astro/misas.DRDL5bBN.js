import{A as u}from"./songs.Cv0urTgp.js";const h=async c=>{try{const a={};c&&(a.Authorization=`Bearer ${c}`);const e=await fetch(`${u}/misas`,{headers:a});return e.ok?{success:!0,data:await e.json()}:{success:!1,error:"Error al obtener las misas."}}catch(a){return console.error("Service exception:",a),{success:!1,error:a instanceof Error?a.message:"Error de conexión."}}},m=async(c,a,e="PUBLIC",t)=>{try{console.log("createMisa called with:",{title:c,dateMisa:a,visibility:e,tokenExists:!!t});const r={"Content-Type":"application/json"};t&&(r.Authorization=`Bearer ${t}`),console.log("createMisa headers:",r);const s=await fetch(`${u}/misas`,{method:"POST",headers:r,body:JSON.stringify({title:c,dateMisa:a,visibility:e})});if(!s.ok){const n=await s.json().catch(i=>"Flux failed to parse error json");return console.error("createMisa failed:",s.status,s.statusText,n),{success:!1,error:"Error al crear la misa.",data:n}}return{success:!0,data:await s.json()}}catch(r){return console.error("Service exception:",r),{success:!1,error:r instanceof Error?r.message:"Error de conexión."}}},E=async(c,a,e,t,r,s)=>{try{const o={"Content-Type":"application/json"};r&&(o.Authorization=`Bearer ${r}`);let n=`${u}/misas/${c}`;s&&(n+=`?edit_token=${s}`);const i=await fetch(n,{method:"PUT",headers:o,body:JSON.stringify({title:a,dateMisa:e,visibility:t})});return i.ok?{success:!0,data:await i.json()}:{success:!1,error:(await i.json()).error||"Error al actualizar la misa."}}catch(o){return console.error("Service exception:",o),{success:!1,error:o instanceof Error?o.message:"Error de conexión."}}},p=async(c,a,e,t,r,s)=>{try{const o={"Content-Type":"application/json"};r&&(o.Authorization=`Bearer ${r}`);let n=`${u}/misas/${c}/songs`;s&&(n+=`?edit_token=${s}`);const i=await fetch(n,{method:"POST",headers:o,body:JSON.stringify({songId:a,momentId:e,key:t})});return i.ok?{success:!0,data:await i.json()}:{success:!1,error:"Error al agregar la canción.",data:await i.json()}}catch(o){return console.error("Service exception:",o),{success:!1,error:o instanceof Error?o.message:"Error de conexión."}}},y=async(c,a,e,t)=>{try{const r={"Content-Type":"application/json"};e&&(r.Authorization=`Bearer ${e}`);let s=`${u}/misas/${c}/songs/${a}`;return t&&(s+=`?edit_token=${t}`),(await fetch(s,{method:"DELETE",headers:r})).ok?{success:!0}:{success:!1,error:"Error al eliminar la canción."}}catch(r){return console.error("Service exception:",r),{success:!1,error:r instanceof Error?r.message:"Error de conexión."}}},$=async(c,a)=>{try{const e={};a&&(e.Authorization=`Bearer ${a}`);const t=await fetch(`${u}/misas/${c}`,{method:"DELETE",headers:e});return t.ok?{success:!0}:{success:!1,error:(await t.json()).error||"Error al eliminar la misa."}}catch(e){return console.error("Service exception:",e),{success:!1,error:e instanceof Error?e.message:"Error de conexión."}}},g=async(c,a,e,t,r)=>{try{const s={"Content-Type":"application/json"};t&&(s.Authorization=`Bearer ${t}`);let o=`${u}/misas/${c}/songs/${a}`;r&&(o+=`?edit_token=${r}`);const n=await fetch(o,{method:"PUT",headers:s,body:JSON.stringify({key:e})});return n.ok?{success:!0,data:await n.json()}:{success:!1,error:(await n.json()).error||"Error al actualizar la canción."}}catch(s){return console.error("Service exception:",s),{success:!1,error:s instanceof Error?s.message:"Error de conexión."}}};export{p as a,E as b,m as c,$ as d,h as g,y as r,g as u};

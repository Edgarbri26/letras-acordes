const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],c=t=>({Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E","E#":"F","B#":"C"})[t]||t,A=(t,s)=>{const o=c(t),a=c(s),e=r.indexOf(o),n=r.indexOf(a);return e===-1||n===-1?0:n-e},B=(t,s)=>{if(!t)return t;const o=t.match(/^([A-G][#b]?)(.*)$/);if(!o)return t;let[a,e,n]=o;e=c(e);const b=r.indexOf(e);if(b===-1)return t;let i=(b+s)%12;i<0&&(i+=12);let d=r[i];if(n.includes("/")){const u=n.split("/"),x=u[u.length-1].match(/^([A-G][#b]?)$/);if(x){const m=c(x[1]),l=r.indexOf(m);if(l!==-1){let f=(l+s)%12;f<0&&(f+=12);const p=r[f];n=n.substring(0,n.lastIndexOf("/"))+"/"+p}}}return d+n},G=(t,s,o)=>{const a=A(s,o);return a===0?t:t.replace(/\[(.*?)\]/g,(e,n)=>`[${B(n,a)}]`)};export{G as a,B as t};

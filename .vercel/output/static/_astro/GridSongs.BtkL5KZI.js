import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.WFquGv8Z.js";import{A as p}from"./songs.Cv0urTgp.js";const u=({song:t})=>e.jsx("a",{href:`/songs/${t.id}`,className:"block group",children:e.jsxs("article",{className:"bg-bg-secondary border border-white/5 rounded-xl p-5 hover:border-accent-main/50 transition-colors h-full",children:[e.jsx("h2",{style:{viewTransitionName:`song-title-${t.id}`},className:"text-xl font-bold text-white group-hover:text-accent-main transition-colors mb-1 truncate",children:t.title}),e.jsx("p",{style:{viewTransitionName:`song-artist-${t.id}`},className:"text-text-secondary text-sm mb-4",children:t.artist}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{style:{viewTransitionName:`song-tone-${t.id}`},className:"text-xs bg-white/5 px-2 py-1 rounded text-text-secondary group-hover:bg-accent-main/10 group-hover:text-accent-main transition-colors",children:["Tom: ",t.key]}),e.jsxs("span",{style:{viewTransitionName:`song-category-${t.id}`},className:"text-xs bg-white/5 px-2 py-1 rounded text-text-secondary group-hover:bg-accent-main/10 group-hover:text-accent-main transition-colors",children:["CategorÃ­a: ",t.category?.name]})]})]})});function w({endpoint:t,initialSongs:a=[]}){const[o,m]=n.useState(a),[i,c]=n.useState(!a||a.length===0),[l,d]=n.useState(null);n.useEffect(()=>{const r=async()=>{c(!0);try{const s=t||`${p}/songs?limit=12`,x=await fetch(s);if(!x.ok)throw new Error("Failed to fetch songs");const g=await x.json();m(g),d(null)}catch(s){console.error("Error fetching songs:",s),d(s.message)}finally{c(!1)}};t||o.length===0?r():a.length>0&&c(!1)},[t]);const h=()=>e.jsxs("div",{className:"bg-bg-secondary border border-white/5 rounded-xl p-5 h-[130px] animate-pulse",children:[e.jsx("div",{className:"h-6 bg-white/10 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-white/5 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 w-16 bg-white/5 rounded"}),e.jsx("div",{className:"h-6 w-24 bg-white/5 rounded"})]})]});return l?e.jsxs("div",{className:"text-red-500 py-10 text-center",children:["Error al cargar canciones: ",l]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i?Array.from({length:6}).map((r,s)=>e.jsx(h,{},s)):o.map(r=>e.jsx(u,{song:r},r.id)),o.length===0&&!i&&e.jsx("div",{className:"text-center w-100 py-10 col-span-1 md:col-span-2 lg:col-span-3",children:e.jsx("p",{className:"text-gray-500 text-xl",children:"No se encontraron canciones."})})]})}export{w as default};

import{S as r}from"./sweetalert2.esm.all.BbQndx0i.js";const s=document.getElementById("songs-page"),l=s?.dataset.apiUrl,d=s?.dataset.token,f=document.querySelectorAll(".toggle-active"),u=document.querySelectorAll(".delete-song-btn"),g=document.getElementById("statusFilter"),m=document.querySelectorAll(".song-row");g?.addEventListener("change",n=>{if(!(n.target instanceof HTMLSelectElement))return;const t=n.target.value;m.forEach(o=>{if(!(o instanceof HTMLElement))return;const e=o.dataset.active;t==="all"||e===t?o.style.display="":o.style.display="none"})});const a={background:"#1f2937",color:"#fff",confirmButtonColor:"#f97316",cancelButtonColor:"#4b5563"};f.forEach(n=>{n.addEventListener("change",async t=>{if(!(t.target instanceof HTMLInputElement))return;const o=t.target.dataset.id,e=t.target.checked,i=t.target.parentElement?.querySelector("span");try{if(i&&(i.textContent=e?"Activo":"Inactivo"),!(await fetch(`${l}/songs/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({active:e})})).ok)throw new Error("Error updating status");r.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,...a}).fire({icon:"success",title:`Canción ${e?"activada":"desactivada"}`})}catch(c){console.error(c),t.target.checked=!e,i&&(i.textContent=e?"Inactivo":"Activo"),r.fire({...a,icon:"error",title:"Error",text:"No se pudo actualizar el estado"})}})});u.forEach(n=>{n.addEventListener("click",()=>{if(!(n instanceof HTMLElement))return;const t=n.dataset.id;r.fire({...a,title:"¿Estás seguro?",text:"Esta acción eliminará la canción permanentemente.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async o=>{if(o.isConfirmed)try{if((await fetch(`${l}/songs/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`}})).ok)r.fire({...a,icon:"success",title:"Eliminado",text:"La canción ha sido eliminada."}).then(()=>window.location.reload());else throw new Error("Error deleting song")}catch{r.fire({...a,icon:"error",title:"Error",text:"No se pudo eliminar la canción"})}})})});

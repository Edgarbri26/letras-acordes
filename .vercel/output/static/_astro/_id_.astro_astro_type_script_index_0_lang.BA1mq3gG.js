import{d as r}from"./songs.DRRN3sIx.js";import{s,d,a as c,b as o}from"./alerts.B2mnkYRv.js";import"./sweetalert2.esm.all.BbQndx0i.js";const n=document.getElementById("key");window.addEventListener("editor-key-change",e=>{n&&e.detail&&e.detail.key&&(n.value=e.detail.key,n.dispatchEvent(new Event("change")))});n?.addEventListener("change",e=>{const t=e.target.value;window.dispatchEvent(new CustomEvent("song-key-change",{detail:{key:t}}))});const a=document.getElementById("deleteSongBtn"),l=document.querySelector("main"),m=l?.dataset.token;a&&a.addEventListener("click",async()=>{const e=a.getAttribute("data-song-id");if(!e)return;if((await s("¿Eliminar canción?","Esta acción no se puede deshacer.","Sí, eliminar")).isConfirmed){d("Eliminando...");try{const t=await r(e,m);t.success?(await c("Canción eliminada",void 0,1500),window.location.href="/"):o("Error",t.error||"Error al eliminar")}catch{o("Error","Error de conexión")}}});

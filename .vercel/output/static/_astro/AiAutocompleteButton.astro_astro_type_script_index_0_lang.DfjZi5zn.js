const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/ai.CnV1FTzm.js","_astro/songs.Cv0urTgp.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./preload-helper.BlTxHScW.js";import{c as i,b as g,d as h,s as E}from"./alerts.CXiBSr95.js";import{S as A}from"./sweetalert2.esm.all.BbQndx0i.js";const t=document.getElementById("btn-ai-autocomplete");t&&t.addEventListener("click",async()=>{const d=t.dataset.titleId||"title",l=t.dataset.keyId||"key",m=t.dataset.contentName||"content",u=t.dataset.token,r=t.dataset.apiUrl,w=document.getElementById(d),p=document.getElementById(l),y=document.querySelector(`[name="${m}"]`),n=w?.value||"",s=p?.value||"",c=y?.value||"";if(!n||!s||!c){await i("Datos incompletos","Asegúrate de tener título, tono y letra cargada.");return}if((await g("¿Generar acordes con IA?","Se reemplazarán los acordes actuales. Se recomienda guardar antes si tienes cambios sin salvar.","Sí, generar","Cancelar")).isConfirmed)try{if(h("Generando acordes con IA..."),t.setAttribute("disabled","true"),t.classList.add("opacity-50","cursor-not-allowed"),!r)throw new Error("API URL no configurada en el componente");const{autocompleteChordsWithAI:e}=await f(async()=>{const{autocompleteChordsWithAI:I}=await import("./ai.CnV1FTzm.js");return{autocompleteChordsWithAI:I}},__vite__mapDeps([0,1])),o=await e({title:n,tone:s,lyrics:c},u,r);if(!o.success)throw new Error(o.error||"Error al generar");const a=o.data;a&&a.chordPro&&(window.dispatchEvent(new CustomEvent("update-editor-content",{detail:{content:a.chordPro}})),await E("¡Acordes generados!","Se agregaron acordes a la canción.",3e3))}catch(e){console.error(e),await i("Error",e.message||"Error desconocido")}finally{A.close(),t.removeAttribute("disabled"),t.classList.remove("opacity-50","cursor-not-allowed")}});

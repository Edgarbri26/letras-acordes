---
// export const prerender = false;
Astro.response.headers.set("Cache-Control", "public, max-age=60, s-maxage=60");
import Layout from "@/layouts/Layout.astro";
import SongContainer from "@/components/SongContainer.jsx";
import "../../styles/global.css";
import type { Song } from "@/types/song";
import "../../styles/global.css";
const { id } = Astro.params;

if (!id) {
    return Astro.redirect("/");
}

// SEO optimization: fetch minimal data or just render shell?
// If the user wants "dynamic island" to avoid blocking, we probably skip server fetch mainly.
// But for SEO, we usually WANT server fetch.
// The user request "que esas peticiones las hagas dentro de un componente de react... para que no haga que duren al moverse entre paginas" imply they prioritize SPEED over SEO or Server Rendering for this part.
// So I will remove the server fetch mostly.
// However, Layout needs title/description.
// I'll set default title or use client-side update (React Helmet)? Astro Layout is static.
// I will keep a skeleton/default title.

const seoTitle = "Cargando... | Letra y Acordes";
const seoDescription = "Cargando canci√≥n...";
---

<Layout title={seoTitle} description={seoDescription}>
    <div
        class="print-header flex items-center gap-4 mb-2 pb-2 border-b border-gray-300"
    >
        <img
            src="/icono-light.svg"
            alt="Cancionero Digital"
            class="w-10 h-10"
        />
        <div class="flex-1">
            <h1 class="text-3xl font-bold text-black leading-tight">
                Cargando...
            </h1>
        </div>
        <div class="text-right">
            <p class="text-gray-400 text-xs">Cancionero Digital</p>
        </div>
    </div>

    <div
        class="flex flex-col h-full bg-bg-main text-text-main print:bg-white print:text-black"
    >
        <SongContainer
            client:only="react"
            id={id}
            token={Astro.cookies.get("token")?.value}
        />
    </div>
</Layout>

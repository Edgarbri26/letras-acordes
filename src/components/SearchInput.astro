---
const { class: className } = Astro.props;
---

<div class={`flex-1 max-w-xl mx-4 ${className || ""}`}>
    <div class="relative flex justify-center items-center">
        <input
            id="global-search-input"
            class="w-full bg-bg-main border border-white/10 rounded-full py-2 px-4 pl-10 text-text-main focus:outline-none focus:border-accent-main transition-colors"
            type="search"
            placeholder="¿Qué quieres tocar y cantar hoy?"
        />
        <i
            class="fa-solid pt-0.5 fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 flex items-center justify-center"
        ></i>
    </div>
</div>

<script>
    const searchInput = document.getElementById(
        "global-search-input",
    ) as HTMLInputElement;

    if (searchInput) {
        searchInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
                const query = searchInput.value.trim();
                if (query) {
                    window.location.href = `/search/${encodeURIComponent(query)}`;
                } else {
                    window.location.href = `/search/all`;
                }
            }
        });
    }
</script>
